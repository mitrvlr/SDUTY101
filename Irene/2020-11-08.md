# 2020-11-01 TIL

## FE Conf
### Session
복잡한 UI 상태를 지배하는 방법 (React)

### Review
하나의 상태가 변경되며 발생되는 사이드 이펙트 로직으로 인한 코드의 복잡도에 대한 고려

#### 고려사항
- 간단해 보이는 UI도 구현 시 생각보다 많은 상태의 컨트롤과 예외 처리가 필요 (side effects)
- 상태 관리를 위한 데이터의 모델링에 비해 상대적으로 과소평가 되어지는 동작(behavior)의 모델링에 주목

#### 해결방법
- **Finite State Machine (FSM)**
    - 동작의 모델링 기법으로서 정규식 또는 promise(async state machine) 또한 이에 해당될 수 있음
    - 정의된 state machine의 모델을 토대로 예상 가능한 상태 변경 로직을 구현
    ex) Reducer로 action을 발생시키는 state machine

- 장점
    - 공통의 목적을 가진 로직을 개별 모델로 생성하여 각 이벤트 시퀀스와 구문이 어떠한 비즈니스 로직을 실행시키는지에 대한 파악과 목적에 맞는 상태 관리 로직을 구현
    - 동작의 변경과 코드 추론에 유리하며 컴포넌트와 별도로 독립적인 테스트가 가능
    - 로직의 visualization과 high level의 표현이 가능해지며 디자인, 기획의 팀 커뮤니케이션 측면에서 유리

- 단점
    - state explosion: state machine에 기능의 추가 및 엣지 케이스 대응을 위한 새로운 상태의 추가가 필요한 경우, 모델링 해야하는 상태와 상태간의 연결 개수가 폭발적으로 증가하는 현상
    -> FSM을 활용하며 state explosion의 문제 해결을 위해서는 변경되는 프로세스에 맞게끔 state machine의 계속적인 유지보수가 필요

- 마무리
    - 엣지 케이스를 위해 새로운 상태를 추가하는 것 보다는 미리 제한한 상태로부터 예상 가능하도록 동작을 기반으로 모델링을 수정
    - 효과적인 상태관리를 위해 코드의 추론이 용이하고 유지보수 가능한 실행 로직을 구현하는 것이 중요
    - 비즈니스 로직을 정리하는 것은 기획, 디자인에 관한 커뮤니케이션 측면에서도 유리
    - 규모가 큰 프로젝트의 경우 FSM를 조금 더 고도화 할 수 있는 State chart 사용을 고려